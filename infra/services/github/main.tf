terraform {
  required_providers {
    github = {
      source = "integrations/github"
    }
    sops = {
      source = "carlpett/sops"
    }
  }

  backend "s3" {
    bucket       = "natsukium-tfstate"
    encrypt      = true
    key          = "global/services/github/terraform.tfstate"
    region       = "us-east-2"
    use_lockfile = true
  }
}

data "sops_file" "github-token" {
  source_file = "secrets.yaml"
}

provider "github" {
  owner = "natsukium"
  token = data.sops_file.github-token.data["token"]
}

resource "github_user_ssh_key" "default" {
  title = "tomoya.otabi@gmail.com"
  key   = "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIKPPimMzL7CcpSpmf1QisRFxdp1e/3C21GZsoyDgZvIu"
}

resource "github_user_gpg_key" "default" {
  # spellchecker:off
  armored_public_key = <<EOT
-----BEGIN PGP PUBLIC KEY BLOCK-----

mDMEYUPsoRYJKwYBBAHaRw8BAQdAW8fhLfyiUhV6Kvfd4IayEEq6LdaPNTtUTp3L
MmtZ3tC0JU9UQUJJIFRvbW95YSA8dG9tb3lhLm90YWJpQGdtYWlsLmNvbT6JAxQE
ExYKArwCGwEECwkIBwQVCgkIBRYCAwEAAh4FAheAAhkBFiEE3MstaeBu6qSJBPih
LVrddTD1akIFAmcaIOCTFIAAAAAAEAB6cHJvb2ZAYXJpYWRuZS5pZG1hdHJpeDp1
L25hdHN1a2l1bT9vcmcua2V5b3hpZGUucj1kQmZRWnhDb0dWbVNUdWpmaXY6bWF0
cml4Lm9yZyZvcmcua2V5b3hpZGUuZT1zanVqZEJ1c0h1QklmTjBjenMtdkpnUVJm
Q05uT044MDd1ZTRxZl83aHVjUhSAAAAAABAAOXByb29mQGFyaWFkbmUuaWRodHRw
czovL3R3aXR0ZXIuY29tL1BhdmFuZTE4OTkvc3RhdHVzLzE4NDg3NTcwOTA2OTkx
MjA4NjaTFIAAAAAAEAB6cHJvb2ZAYXJpYWRuZS5pZG1hdHJpeDp1L25hdHN1a2l1
bT9vcmcua2V5b3hpZGUucj1kQmZRWnhDb0dWbVNUdWpmaXY6bWF0cml4Lm9yZyZv
cmcua2V5b3hpZGUuZT16TEZOQzhFakRxRFlrWGFrdUtpTUwxSURGTmt6VEdLRWtU
aE1Lcng5cmVRMxSAAAAAABAAGnByb29mQGFyaWFkbmUuaWRkbnM6bmF0c3VraXVt
LmNvbT90eXBlPVRYVFsUgAAAAAAQAEJwcm9vZkBhcmlhZG5lLmlkaHR0cHM6Ly9n
aXN0LmdpdGh1Yi5jb20vbmF0c3VraXVtLzg5MTVkOTczYzUxOThmYzA3YTBmYjQw
MDQ4YjkxYzFhQBSAAAAAABAAJ3Byb29mQGFyaWFkbmUuaWRodHRwczovL2Rpc2Nv
dXJzZS5uaXhvcy5vcmcvdS9uYXRzdWtpdW02FIAAAAAAEAAdcHJvb2ZAYXJpYWRu
ZS5pZGh0dHBzOi8vZGlzY29yZC5nZy9TN1poSHJUM2ZTAAoJEC1a3XUw9WpCTtYB
AKbdCIiD2dmiI73IA5UrnaPCOnD79SKdKPanbogxbXMUAP49Cr2cvPFuEcQc4Iz5
iwKDCuSixf7HYuDuxaDQu09YDIkCgAQTFgoCKAIbAQQLCQgHBBUKCQgFFgIDAQAC
HgUCF4ACGQEWIQTcyy1p4G7qpIkE+KEtWt11MPVqQgUCZxfO5jYUgAAAAAAQAB1w
cm9vZkBhcmlhZG5lLmlkaHR0cHM6Ly9kaXNjb3JkLmdnL1M3WmhIclQzZlNAFIAA
AAAAEAAncHJvb2ZAYXJpYWRuZS5pZGh0dHBzOi8vZGlzY291cnNlLm5peG9zLm9y
Zy91L25hdHN1a2l1bVsUgAAAAAAQAEJwcm9vZkBhcmlhZG5lLmlkaHR0cHM6Ly9n
aXN0LmdpdGh1Yi5jb20vbmF0c3VraXVtLzg5MTVkOTczYzUxOThmYzA3YTBmYjQw
MDQ4YjkxYzFhMxSAAAAAABAAGnByb29mQGFyaWFkbmUuaWRkbnM6bmF0c3VraXVt
LmNvbT90eXBlPVRYVJMUgAAAAAAQAHpwcm9vZkBhcmlhZG5lLmlkbWF0cml4OnUv
bmF0c3VraXVtP29yZy5rZXlveGlkZS5yPWRCZlFaeENvR1ZtU1R1amZpdjptYXRy
aXgub3JnJm9yZy5rZXlveGlkZS5lPXpMRk5DOEVqRHFEWWtYYWt1S2lNTDFJREZO
a3pUR0tFa1RoTUtyeDlyZVFSFIAAAAAAEAA5cHJvb2ZAYXJpYWRuZS5pZGh0dHBz
Oi8vdHdpdHRlci5jb20vUGF2YW5lMTg5OS9zdGF0dXMvMTg0ODc1NzA5MDY5OTEy
MDg2NgAKCRAtWt11MPVqQvdYAQDE9X2uP1dg3ye1YcYmu+uTDldCStoa+qx5i6TP
GITZ+QD/Q2mXOk8AqL970K+8sJgExWCndzKb1um9IrW2lC2jgQGJAkkEExYKAfEC
GwEECwkIBwQVCgkIBRYCAwEAAh4FAheAAhkBFiEE3MstaeBu6qSJBPihLVrddTD1
akIFAmcXzRtSFIAAAAAAEAA5cHJvb2ZAYXJpYWRuZS5pZGh0dHBzOi8vdHdpdHRl
ci5jb20vUGF2YW5lMTg5OS9zdGF0dXMvMTg0ODc1NzA5MDY5OTEyMDg2NpMUgAAA
AAAQAHpwcm9vZkBhcmlhZG5lLmlkbWF0cml4OnUvbmF0c3VraXVtP29yZy5rZXlv
eGlkZS5yPWRCZlFaeENvR1ZtU1R1amZpdjptYXRyaXgub3JnJm9yZy5rZXlveGlk
ZS5lPXpMRk5DOEVqRHFEWWtYYWt1S2lNTDFJREZOa3pUR0tFa1RoTUtyeDlyZVEz
FIAAAAAAEAAacHJvb2ZAYXJpYWRuZS5pZGRuczpuYXRzdWtpdW0uY29tP3R5cGU9
VFhUWxSAAAAAABAAQnByb29mQGFyaWFkbmUuaWRodHRwczovL2dpc3QuZ2l0aHVi
LmNvbS9uYXRzdWtpdW0vODkxNWQ5NzNjNTE5OGZjMDdhMGZiNDAwNDhiOTFjMWFA
FIAAAAAAEAAncHJvb2ZAYXJpYWRuZS5pZGh0dHBzOi8vZGlzY291cnNlLm5peG9z
Lm9yZy91L25hdHN1a2l1bQAKCRAtWt11MPVqQs09AP92CPQjnoFgOFlrnPlYSw/r
m6uALk3mXG1Jb5bw8c38TQEArZKfNlLq8gUAC/u8v6+aV45kcQvQ5DrMjm7fX6Oy
MgCJAfYEExYKAZ4CGwEECwkIBwQVCgkIBRYCAwEAAh4FAheAAhkBFiEE3MstaeBu
6qSJBPihLVrddTD1akIFAmcXy6hAFIAAAAAAEAAncHJvb2ZAYXJpYWRuZS5pZGh0
dHBzOi8vZGlzY291cnNlLm5peG9zLm9yZy91L25hdHN1a2l1bVsUgAAAAAAQAEJw
cm9vZkBhcmlhZG5lLmlkaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vbmF0c3VraXVt
Lzg5MTVkOTczYzUxOThmYzA3YTBmYjQwMDQ4YjkxYzFhMxSAAAAAABAAGnByb29m
QGFyaWFkbmUuaWRkbnM6bmF0c3VraXVtLmNvbT90eXBlPVRYVJMUgAAAAAAQAHpw
cm9vZkBhcmlhZG5lLmlkbWF0cml4OnUvbmF0c3VraXVtP29yZy5rZXlveGlkZS5y
PWRCZlFaeENvR1ZtU1R1amZpdjptYXRyaXgub3JnJm9yZy5rZXlveGlkZS5lPXpM
Rk5DOEVqRHFEWWtYYWt1S2lNTDFJREZOa3pUR0tFa1RoTUtyeDlyZVEACgkQLVrd
dTD1akJ0bQEA4vfbm2EOU5XL4IBat+p7XpJG6QT8lAQ6/ZkAX8aexGUA+gI5Y6YJ
IItkavNuhEwDPK0yoGbtoZLza/XjlaioQzUDiQG1BBMWCgFdAhsBBAsJCAcEFQoJ
CAUWAgMBAAIeBQIXgAIZARYhBNzLLWngbuqkiQT4oS1a3XUw9WpCBQJnF8nukxSA
AAAAABAAenByb29mQGFyaWFkbmUuaWRtYXRyaXg6dS9uYXRzdWtpdW0/b3JnLmtl
eW94aWRlLnI9ZEJmUVp4Q29HVm1TVHVqZml2Om1hdHJpeC5vcmcmb3JnLmtleW94
aWRlLmU9ekxGTkM4RWpEcURZa1hha3VLaU1MMUlERk5relRHS0VrVGhNS3J4OXJl
UTMUgAAAAAAQABpwcm9vZkBhcmlhZG5lLmlkZG5zOm5hdHN1a2l1bS5jb20/dHlw
ZT1UWFRbFIAAAAAAEABCcHJvb2ZAYXJpYWRuZS5pZGh0dHBzOi8vZ2lzdC5naXRo
dWIuY29tL25hdHN1a2l1bS84OTE1ZDk3M2M1MTk4ZmMwN2EwZmI0MDA0OGI5MWMx
YQAKCRAtWt11MPVqQnI7AQDo7vk5ugbiXodrqkR0A1Xw7q8hEE283HJSnNOXoHMr
PgEA09n94t2oxKuGya1jZy4P972cRjeKoNnvt+deJxvFawyJASEEExYKAMkCGwEE
CwkIBwQVCgkIBRYCAwEAAh4FAheAAhkBFiEE3MstaeBu6qSJBPihLVrddTD1akIF
AmbEr51bFIAAAAAAEABCcHJvb2ZAYXJpYWRuZS5pZGh0dHBzOi8vZ2lzdC5naXRo
dWIuY29tL25hdHN1a2l1bS84OTE1ZDk3M2M1MTk4ZmMwN2EwZmI0MDA0OGI5MWMx
YTMUgAAAAAAQABpwcm9vZkBhcmlhZG5lLmlkZG5zOm5hdHN1a2l1bS5jb20/dHlw
ZT1UWFQACgkQLVrddTD1akL5AAEAtYI2m8bBcMu9ZblG5SCDDxLj6B9ef6DWGi6D
eMg2CswA/3vUagrDiX+3PJ00rrWSMGXPpizvGtDP78J5/UY2iGoAiMUEExYKAG0C
GwEECwkIBwQVCgkIBRYCAwEAAh4FAheAAhkBFiEE3MstaeBu6qSJBPihLVrddTD1
akIFAmbErXwzFIAAAAAAEAAacHJvb2ZAYXJpYWRuZS5pZGRuczpuYXRzdWtpdW0u
Y29tP3R5cGU9VFhUAAoJEC1a3XUw9WpC0dIBAJfeVOf4FDiVvTi0MZOldQ1LVA96
qAmUjZ8/p355zMn1AQD9csMD5ZB0+txWPV9ZNmQuCy6D7KXrjCZNoMFA3RbqBIiR
BBMWCgA5AhsBBAsJCAcEFQoJCAUWAgMBAAIeBQIXgBYhBNzLLWngbuqkiQT4oS1a
3XUw9WpCBQJmxKL7AhkBAAoJEC1a3XUw9WpCnysBANAVpvK7cJGSx9q7Qz3S4Trj
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
=Y6EE
-----END PGP PUBLIC KEY BLOCK-----
EOT
  # spellchecker:on
}

